@field_validator("merchant_code")
def validate_merchant_code(cls, v):
    # Convert to uppercase first
    v_upper = v.upper()
    if not re.match(r"^[A-Z0-9]{3,4}$", v_upper):
        raise HTTPException(
            status_code=400, detail=f"Invalid merchant_code: {v}. Must be 3-4 characters of uppercase letters and digits"
        )
    return v_upper
